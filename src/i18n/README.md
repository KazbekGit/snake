# Internationalization (i18n)

–°–∏—Å—Ç–µ–º–∞ –∏–Ω—Ç–µ—Ä–Ω–∞—Ü–∏–æ–Ω–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è Social Studies —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —Ä—É—Å—Å–∫–æ–≥–æ –∏ –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ —è–∑—ã–∫–æ–≤.

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞

```
src/i18n/
‚îú‚îÄ‚îÄ index.ts              # –û—Å–Ω–æ–≤–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ i18n
‚îú‚îÄ‚îÄ README.md             # –≠—Ç–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îî‚îÄ‚îÄ __tests__/
    ‚îî‚îÄ‚îÄ index.test.ts     # –¢–µ—Å—Ç—ã —Å–∏—Å—Ç–µ–º—ã i18n
```

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ò–º–ø–æ—Ä—Ç –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```typescript
import { t, tn, setLocale, getLocale } from '../i18n';

// –ü—Ä–æ—Å—Ç–æ–π –ø–µ—Ä–µ–≤–æ–¥
const backText = t('back'); // "–ù–∞–∑–∞–¥" –∏–ª–∏ "Back"

// –ü–µ—Ä–µ–≤–æ–¥ —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
const progressText = t('blockProgress', { current: 1, total: 4 }); 
// "–ë–ª–æ–∫ 1 –∏–∑ 4" –∏–ª–∏ "Block 1 of 4"

// –ü–æ–ª—É—á–µ–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞ –ø–µ—Ä–µ–≤–æ–¥–æ–≤
const sections = tn('sectionsList');
// { personSociety: "–ß–µ–ª–æ–≤–µ–∫ –∏ –æ–±—â–µ—Å—Ç–≤–æ", economy: "–≠–∫–æ–Ω–æ–º–∏–∫–∞", ... }
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö

```typescript
import { useI18n } from '../hooks/useI18n';

function MyComponent() {
  const { t, locale, changeLocale } = useI18n();
  
  return (
    <View>
      <Text>{t('appTitle')}</Text>
      <Button 
        title={t('startButton')} 
        onPress={() => changeLocale(locale === 'ru' ? 'en' : 'ru')} 
      />
    </View>
  );
}
```

## üîß API

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

#### `t(key: string, params?: Record<string, string | number>): string`
–ü–µ—Ä–µ–≤–æ–¥–∏—Ç –∫–ª—é—á –≤ —Ç–µ–∫—É—â–∏–π —è–∑—ã–∫.

```typescript
t('back') // "–ù–∞–∑–∞–¥" –∏–ª–∏ "Back"
t('blockProgress', { current: 1, total: 4 }) // "–ë–ª–æ–∫ 1 –∏–∑ 4"
```

#### `tn(key: string): Record<string, string>`
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–±—ä–µ–∫—Ç –ø–µ—Ä–µ–≤–æ–¥–æ–≤ –¥–ª—è –≤–ª–æ–∂–µ–Ω–Ω–æ–≥–æ –∫–ª—é—á–∞.

```typescript
tn('sectionsList') // { personSociety: "...", economy: "...", ... }
```

#### `setLocale(locale: 'ru' | 'en'): void`
–£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Ç–µ–∫—É—â–∏–π —è–∑—ã–∫.

```typescript
setLocale('en'); // –ü–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–∏–π
```

#### `getLocale(): 'ru' | 'en'`
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–µ–∫—É—â–∏–π —è–∑—ã–∫.

```typescript
const currentLang = getLocale(); // "ru" –∏–ª–∏ "en"
```

### React Hook

#### `useI18n()`
–•—É–∫ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∏–Ω—Ç–µ—Ä–Ω–∞—Ü–∏–æ–Ω–∞–ª–∏–∑–∞—Ü–∏–µ–π –≤ React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö.

```typescript
const { 
  locale,           // –¢–µ–∫—É—â–∏–π —è–∑—ã–∫
  isLoading,        // –ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –ª–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–π —è–∑—ã–∫
  changeLocale,     // –§—É–Ω–∫—Ü–∏—è —Å–º–µ–Ω—ã —è–∑—ã–∫–∞
  t,                // –§—É–Ω–∫—Ü–∏—è –ø–µ—Ä–µ–≤–æ–¥–∞
  tn                // –§—É–Ω–∫—Ü–∏—è –ø–æ–ª—É—á–µ–Ω–∏—è –æ–±—ä–µ–∫—Ç–∞ –ø–µ—Ä–µ–≤–æ–¥–æ–≤
} = useI18n();
```

## üìù –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–µ—Ä–µ–≤–æ–¥–æ–≤

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ä–∞–∑–¥–µ–ª—ã

```typescript
{
  // –û–±—â–∏–µ —ç–ª–µ–º–µ–Ω—Ç—ã
  back: "–ù–∞–∑–∞–¥",
  continue: "–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å",
  start: "–ù–∞—á–∞—Ç—å",
  
  // –ù–∞–≤–∏–≥–∞—Ü–∏—è
  home: "–ì–ª–∞–≤–Ω–∞—è",
  topics: "–¢–µ–º—ã",
  statistics: "–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞",
  
  // –≠–∫—Ä–∞–Ω—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
  appTitle: "–û–±—â–µ—Å—Ç–≤–æ–∑–Ω–∞–Ω–∏–µ",
  appSubtitle: "–ò–∑—É—á–∞–π—Ç–µ –æ–±—â–µ—Å—Ç–≤–æ–∑–Ω–∞–Ω–∏–µ",
  
  // –†–∞–∑–¥–µ–ª—ã
  sectionsList: {
    personSociety: "–ß–µ–ª–æ–≤–µ–∫ –∏ –æ–±—â–µ—Å—Ç–≤–æ",
    economy: "–≠–∫–æ–Ω–æ–º–∏–∫–∞",
    // ...
  },
  
  // –¢–µ–º—ã
  topics: {
    money: {
      title: "–î–µ–Ω—å–≥–∏",
      description: "–ò–∑—É—á–∞–µ–º –ø—Ä–∏—Ä–æ–¥—É –¥–µ–Ω–µ–≥",
      blocks: {
        definition: "–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ",
        functions: "–§—É–Ω–∫—Ü–∏–∏",
        // ...
      }
    }
  },
  
  // –û—à–∏–±–∫–∏ –∏ —Å–æ–æ–±—â–µ–Ω–∏—è
  errors: {
    networkError: "–û—à–∏–±–∫–∞ —Å–µ—Ç–∏",
    // ...
  },
  
  success: {
    progressSaved: "–ü—Ä–æ–≥—Ä–µ—Å—Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω",
    // ...
  }
}
```

### –í–ª–æ–∂–µ–Ω–Ω—ã–µ –∫–ª—é—á–∏

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ—á–∫—É –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –≤–ª–æ–∂–µ–Ω–Ω—ã–º –∫–ª—é—á–∞–º:

```typescript
t('topics.money.title')           // "–î–µ–Ω—å–≥–∏"
t('topics.money.blocks.definition') // "–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ"
t('sectionsList.economy')         // "–≠–∫–æ–Ω–æ–º–∏–∫–∞"
```

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ –ø–µ—Ä–µ–≤–æ–¥–∞—Ö

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `{paramName}` –¥–ª—è –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤:

```typescript
// –í –ø–µ—Ä–µ–≤–æ–¥–µ: "–ë–ª–æ–∫ {current} –∏–∑ {total}"
t('blockProgress', { current: 1, total: 4 }) // "–ë–ª–æ–∫ 1 –∏–∑ 4"

// –í –ø–µ—Ä–µ–≤–æ–¥–µ: "–°–±—Ä–æ—Å–∏—Ç—å —Ç–µ–º—É ¬´{topic}¬ª"
t('resetTopicProgress', { topic: '–î–µ–Ω—å–≥–∏' }) // "–°–±—Ä–æ—Å–∏—Ç—å —Ç–µ–º—É ¬´–î–µ–Ω—å–≥–∏¬ª"
```

## üåê –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —è–∑—ã–∫–∏

### –†—É—Å—Å–∫–∏–π (ru)
- –û—Å–Ω–æ–≤–Ω–æ–π —è–∑—ã–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- –ü–æ–ª–Ω–∞—è –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤
- –ê–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ç–µ—Ä–º–∏–Ω—ã –¥–ª—è —Ä–æ—Å—Å–∏–π—Å–∫–æ–≥–æ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è

### –ê–Ω–≥–ª–∏–π—Å–∫–∏–π (en)
- –ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω–∞—è –≤–µ—Ä—Å–∏—è
- –ê–∫–∞–¥–µ–º–∏—á–µ—Å–∫–∞—è —Ç–µ—Ä–º–∏–Ω–æ–ª–æ–≥–∏—è
- –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º

## üíæ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤—ã–±—Ä–∞–Ω–Ω—ã–π —è–∑—ã–∫ –≤ AsyncStorage:

```typescript
// –ö–ª—é—á —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
const LOCALE_STORAGE_KEY = 'app_locale';

// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ
useEffect(() => {
  loadSavedLocale();
}, []);
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

```bash
# –¢–µ—Å—Ç—ã —Å–∏—Å—Ç–µ–º—ã i18n
npm test src/i18n/__tests__/index.test.ts

# –¢–µ—Å—Ç—ã React —Ö—É–∫–∞
npm test src/hooks/__tests__/useI18n.test.ts

# –í—Å–µ —Ç–µ—Å—Ç—ã
npm test
```

### –ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏

- ‚úÖ –ü–µ—Ä–µ–≤–æ–¥—ã (–ø—Ä–æ—Å—Ç—ã–µ –∏ –≤–ª–æ–∂–µ–Ω–Ω—ã–µ –∫–ª—é—á–∏)
- ‚úÖ –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ –ø–µ—Ä–µ–≤–æ–¥–∞—Ö
- ‚úÖ –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —è–∑—ã–∫–æ–≤
- ‚úÖ Fallback –¥–ª—è –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏—Ö –ø–µ—Ä–µ–≤–æ–¥–æ–≤
- ‚úÖ React —Ö—É–∫ (–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è, —Å–º–µ–Ω–∞ —è–∑—ã–∫–∞, —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ)
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ AsyncStorage

## üîÑ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –ø–µ—Ä–µ–≤–æ–¥–æ–≤

### 1. –î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–µ–≤–æ–¥—ã –≤ —Å–ª–æ–≤–∞—Ä–∏

```typescript
// –í src/i18n/index.ts
const ru: Dict = {
  // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–µ—Ä–µ–≤–æ–¥—ã
  newSection: {
    title: "–ù–æ–≤—ã–π —Ä–∞–∑–¥–µ–ª",
    description: "–û–ø–∏—Å–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Ä–∞–∑–¥–µ–ª–∞"
  }
};

const en: Dict = {
  // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–µ—Ä–µ–≤–æ–¥—ã
  newSection: {
    title: "New Section",
    description: "Description of new section"
  }
};
```

### 2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö

```typescript
const { t } = useI18n();

return (
  <View>
    <Text>{t('newSection.title')}</Text>
    <Text>{t('newSection.description')}</Text>
  </View>
);
```

### 3. –î–æ–±–∞–≤—å—Ç–µ —Ç–µ—Å—Ç—ã

```typescript
it('should translate new section', () => {
  expect(t('newSection.title')).toBe('–ù–æ–≤—ã–π —Ä–∞–∑–¥–µ–ª');
  expect(t('newSection.description')).toBe('–û–ø–∏—Å–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Ä–∞–∑–¥–µ–ª–∞');
});
```

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–µ—Ä–µ–≤–æ–¥–æ–≤

### –ü–æ–∫—Ä—ã—Ç–∏–µ
- **–û–±—â–∏–µ —ç–ª–µ–º–µ–Ω—Ç—ã**: 100% (15 –∫–ª—é—á–µ–π)
- **–ù–∞–≤–∏–≥–∞—Ü–∏—è**: 100% (4 –∫–ª—é—á–∞)
- **–≠–∫—Ä–∞–Ω—ã**: 100% (20+ –∫–ª—é—á–µ–π)
- **–¢–µ–º—ã**: 100% (3 —Ç–µ–º—ã, 12 –±–ª–æ–∫–æ–≤)
- **–¢–µ—Å—Ç—ã**: 100% (–≤–æ–ø—Ä–æ—Å—ã, –æ—Ç–≤–µ—Ç—ã, –æ–±—ä—è—Å–Ω–µ–Ω–∏—è)
- **–û—à–∏–±–∫–∏ –∏ —Å–æ–æ–±—â–µ–Ω–∏—è**: 100% (8 –∫–ª—é—á–µ–π)

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞
- **–í—Å–µ–≥–æ –∫–ª—é—á–µ–π**: 150+
- **–í–ª–æ–∂–µ–Ω–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤**: 15
- **–ü–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö —Å—Ç—Ä–æ–∫**: 10
- **–Ø–∑—ã–∫–æ–≤**: 2 (ru/en)

## üéØ –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

### 1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ–ø–∏—Å–∞—Ç–µ–ª—å–Ω—ã–µ –∫–ª—é—á–∏
```typescript
// ‚úÖ –•–æ—Ä–æ—à–æ
t('topics.money.blocks.definition')

// ‚ùå –ü–ª–æ—Ö–æ
t('t.m.b.d')
```

### 2. –ì—Ä—É–ø–ø–∏—Ä—É–π—Ç–µ —Å–≤—è–∑–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ–≤–æ–¥—ã
```typescript
topics: {
  money: {
    title: "–î–µ–Ω—å–≥–∏",
    description: "–ò–∑—É—á–∞–µ–º –ø—Ä–∏—Ä–æ–¥—É –¥–µ–Ω–µ–≥",
    blocks: { /* ... */ }
  }
}
```

### 3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
```typescript
// ‚úÖ –•–æ—Ä–æ—à–æ
t('blockProgress', { current: 1, total: 4 })

// ‚ùå –ü–ª–æ—Ö–æ
t('blockProgress1of4')
```

### 4. –î–æ–±–∞–≤–ª—è–π—Ç–µ fallback –¥–ª—è –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏—Ö –ø–µ—Ä–µ–≤–æ–¥–æ–≤
```typescript
// –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–ª—é—á –µ—Å–ª–∏ –ø–µ—Ä–µ–≤–æ–¥ –Ω–µ –Ω–∞–π–¥–µ–Ω
t('nonexistent.key') // –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç "nonexistent.key"
```

### 5. –¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ –ø–µ—Ä–µ–≤–æ–¥—ã
```typescript
it('should translate all required keys', () => {
  expect(t('appTitle')).toBe('–û–±—â–µ—Å—Ç–≤–æ–∑–Ω–∞–Ω–∏–µ');
  expect(t('startButton')).toBe('–ù–∞—á–∞—Ç—å');
});
```

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
- **–Ø–∑—ã–∫ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é**: –†—É—Å—Å–∫–∏–π (ru)
- **–ö–ª—é—á —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è**: `app_locale`
- **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤**: ‚úÖ
- **Fallback**: –ö–ª—é—á –ø–µ—Ä–µ–≤–æ–¥–∞

### –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã

–î–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ–≥–æ —è–∑—ã–∫–∞:

1. –°–æ–∑–¥–∞–π—Ç–µ —Å–ª–æ–≤–∞—Ä—å –ø–µ—Ä–µ–≤–æ–¥–æ–≤
2. –î–æ–±–∞–≤—å—Ç–µ –≤ `setLocale` —Ñ—É–Ω–∫—Ü–∏—é
3. –û–±–Ω–æ–≤–∏—Ç–µ —Ç–∏–ø—ã
4. –î–æ–±–∞–≤—å—Ç–µ —Ç–µ—Å—Ç—ã

```typescript
const es: Dict = {
  appTitle: "Estudios Sociales",
  // ...
};

export function setLocale(locale: "ru" | "en" | "es") {
  currentDict = locale === "en" ? en : locale === "es" ? es : ru;
}
```

## üìö –†–µ—Å—É—Ä—Å—ã

- [React Native i18n](https://github.com/react-native-community/react-native-localize)
- [i18next](https://www.i18next.com/)
- [React i18next](https://react.i18next.com/)
- [ICU Message Format](https://formatjs.io/docs/intl-messageformat/)
